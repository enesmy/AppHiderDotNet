<Window x:Class="AppHiderNet.VisibleAppsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Select Apps to Hide" Height="500" Width="400"
        WindowStyle="None"
        ResizeMode="NoResize"
        AllowsTransparency="True"
        Background="Transparent"
        WindowStartupLocation="CenterScreen">

    <Border Background="{StaticResource GlassBackgroundBrush}" 
            BorderBrush="{StaticResource GlassBorderBrush}" 
            BorderThickness="1" 
            CornerRadius="16"
            MouseLeftButtonDown="Window_MouseLeftButtonDown">
        <Border.Effect>
            <DropShadowEffect Color="Black" BlurRadius="20" ShadowDepth="0" Opacity="0.5"/>
        </Border.Effect>

        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Grid Grid.Row="0" Margin="0,0,0,15">
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="ðŸ”’" 
                               Foreground="{StaticResource GlassTextBrush}" 
                               FontSize="18" 
                               VerticalAlignment="Center"
                               Margin="0,0,8,0"/>
                    <TextBlock Text="Select Apps to Hide" 
                               Foreground="{StaticResource GlassTextBrush}" 
                               FontSize="20" 
                               FontWeight="Bold" 
                               VerticalAlignment="Center"/>
                </StackPanel>
                
                <Button Content="âœ•" 
                        HorizontalAlignment="Right" 
                        VerticalAlignment="Center"
                        Width="32" Height="32"
                        Padding="0"
                        Background="Transparent"
                        BorderThickness="0"
                        Foreground="{StaticResource GlassTextSecondaryBrush}"
                        FontSize="16"
                        Click="CloseButton_Click"/>
            </Grid>

            <!-- List -->
            <ListBox x:Name="AppsList" Grid.Row="1" Margin="0,0,0,15" SelectionMode="Multiple">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <CheckBox IsChecked="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=ListBoxItem}, Mode=TwoWay}"
                                      VerticalAlignment="Center"
                                      Margin="0,0,10,0"/>
                            <TextBlock Text="{Binding Title}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

            <!-- Footer -->
            <StackPanel Grid.Row="2">
                <CheckBox x:Name="PasswordProtectCheck" 
                          Content="Password Protect Selected Apps" 
                          Foreground="{StaticResource GlassTextBrush}"
                          Margin="0,0,0,8"/>
                
                <CheckBox x:Name="UseMasterPasswordCheck" 
                          Content="Use Master Password (if set)" 
                          Foreground="{StaticResource GlassTextBrush}"
                          Margin="0,0,0,15">
                    <CheckBox.Style>
                        <Style TargetType="CheckBox">
                            <Style.Triggers>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="TextBlock.TextDecorations" Value="Strikethrough"/>
                                    <Setter Property="Opacity" Value="0.5"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </CheckBox.Style>
                </CheckBox>
                
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Refresh" Width="120" Height="35" Margin="0,0,10,0" Click="RefreshButton_Click"/>
                    <Button Content="Hide Selected" Width="120" Height="35" Click="HideSelected_Click"/>
                </StackPanel>
            </StackPanel>
        </Grid>
    </Border>
</Window>
